{"ast":null,"code":"import{useEffect,useRef,useState}from\"react\";import{EmployeeCard}from\"./EmployeeCard\";import{deleteEmployeeById,getAllEmployees,getEmployeesByName}from\"../model/EmployeeCRUD\";import{useLoaderData}from\"react-router-dom\";import{jsx as _jsx,jsxs as _jsxs,Fragment as _Fragment}from\"react/jsx-runtime\";export function NeoEmployees(){const nameNode=useRef();let data=null;const[employees,setEmployees]=useState([]);let[errorMessage,setMessage]=useState(\"\");useEffect(()=>{const fetchEmployees=async()=>{try{data=await getAllEmployees();// console.log(data);\nsetEmployees(data);}catch(error){// console.log(error);\nsetMessage('Failed to fetch employees');}};fetchEmployees();},[]);// Fetch data once when the component mounts\n// let [employees, setEmployees]=useState(data); \nasync function getEmps(){const data=await getAllEmployees();setEmployees(data);}async function deleteEmployee(_id){const ans=window.confirm(\"Do you really want to delete?\");if(ans){const data=await deleteEmployeeById(_id);window.alert(\"Employee deleted successfully....\");getEmps();}}async function searchEmp(emp_name){if(emp_name!==\"\"){const data=await getEmployeesByName(emp_name);if(data.length>0)setEmployees(data);else setMessage(\"NOT FOUND\");}else{setMessage(\"\");setEmployees(data);}}useEffect(()=>{//    console.log(employees);\n//    getEmps();\n}/* ,[] */);const employeeCards=employees.map((employee,i)=>/*#__PURE__*/_jsx(EmployeeCard,{employee:employee,deleteEmployee:deleteEmployee},'e'+i));return/*#__PURE__*/_jsx(_Fragment,{children:/*#__PURE__*/_jsx(\"div\",{class:\"container\",children:/*#__PURE__*/_jsx(\"div\",{class:\"row justify-content-center\",children:/*#__PURE__*/_jsx(\"div\",{class:\"col-md-12 pt-5 pb-5\",children:/*#__PURE__*/_jsxs(\"div\",{class:\"card\",children:[/*#__PURE__*/_jsx(\"div\",{class:\"card-header\",children:\"All Employees\"}),/*#__PURE__*/_jsxs(\"div\",{class:\"card-body\",children:[/*#__PURE__*/_jsxs(\"section\",{className:\"m-2\",children:[/*#__PURE__*/_jsx(\"label\",{children:\"Employee name to search:\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",ref:nameNode,onKeyUp:()=>searchEmp(nameNode.current.value)}),/*#__PURE__*/_jsxs(\"span\",{className:\"text-danger text-bold\",children:[\" \",errorMessage]})]}),/*#__PURE__*/_jsx(\"div\",{className:\"row\",children:employeeCards})]})]})})})})});}","map":{"version":3,"names":["useEffect","useRef","useState","EmployeeCard","deleteEmployeeById","getAllEmployees","getEmployeesByName","useLoaderData","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","NeoEmployees","nameNode","data","employees","setEmployees","errorMessage","setMessage","fetchEmployees","error","getEmps","deleteEmployee","_id","ans","window","confirm","alert","searchEmp","emp_name","length","employeeCards","map","employee","i","children","class","className","type","ref","onKeyUp","current","value"],"sources":["/home/neosoft/Desktop/react-ems3/src/components/NeoEmployees.js"],"sourcesContent":["import { useEffect, useRef, useState } from \"react\";\nimport { EmployeeCard } from \"./EmployeeCard\";\nimport { deleteEmployeeById, getAllEmployees, getEmployeesByName } from \"../model/EmployeeCRUD\";\nimport { useLoaderData } from \"react-router-dom\";\n\n\nexport function NeoEmployees(){\n    const nameNode=useRef();\n    let data= null;\n    const [employees, setEmployees] = useState([]);\n    let [errorMessage, setMessage]=useState(\"\");\n\n    useEffect(() => {\n        const fetchEmployees = async () => {\n            try {\n                data = await getAllEmployees();\n                // console.log(data);\n                setEmployees(data);\n            } catch (error) {\n                // console.log(error);\n                setMessage('Failed to fetch employees');\n            }\n        };\n\n        fetchEmployees();\n    }, []); // Fetch data once when the component mounts\n\n    // let [employees, setEmployees]=useState(data); \n    \n\n    async function getEmps(){\n        const data=await getAllEmployees();\n        setEmployees(data);\n    }\n    async function deleteEmployee(_id){\n        const ans=window.confirm(\"Do you really want to delete?\");\n        if(ans){\n            const data=await deleteEmployeeById(_id);\n            window.alert(\"Employee deleted successfully....\");\n            getEmps();    \n        }\n    }  \n    async function  searchEmp(emp_name){\n        if(emp_name!==\"\")\n        {\n            const data=await getEmployeesByName(emp_name);\n            if(data.length>0)\n                setEmployees(data);\n            else\n                setMessage(\"NOT FOUND\");\n        }\n        else{\n            setMessage(\"\");\n            setEmployees(data);\n        }\n            \n            \n    }\n    useEffect(()=>{ \n    //    console.log(employees);\n    //    getEmps();\n    }/* ,[] */)\n\n    const employeeCards=employees.map((employee, i)=><EmployeeCard key={'e'+i} employee={employee} deleteEmployee={deleteEmployee}></EmployeeCard>)\n    return(\n        <>\n        <div class=\"container\">\n            <div class=\"row justify-content-center\">\n                <div class=\"col-md-12 pt-5 pb-5\">\n                    <div class=\"card\">\n                        <div class=\"card-header\">All Employees</div>\n\n                        <div class=\"card-body\">\n                            <section className=\"m-2\">\n                                <label>Employee name to search:</label>\n                                <input type=\"text\" ref={nameNode} onKeyUp={()=>searchEmp(nameNode.current.value)}></input>\n                                <span className=\"text-danger text-bold\"> {errorMessage}</span>\n                            </section>\n                            <div className=\"row\">\n                                {employeeCards}\n                            </div>\n                        </div>\n                    </div>\n                </div>\n            </div>\n        </div>\n        </>\n      \n    );\n}"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}