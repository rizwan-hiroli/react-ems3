{"ast":null,"code":"import{useEffect,useState}from\"react\";import{Employee}from\"../classes/Employee\";import{useLoaderData,useLocation,useNavigate,useParams}from\"react-router-dom\";import{addEmployee,updateEmployee}from'../model/EmployeeCRUD';import{jsx as _jsx,jsxs as _jsxs,Fragment as _Fragment}from\"react/jsx-runtime\";export function EmployeeForm(){const location=useLocation();const emp=useLoaderData();const departments=['LD','JS','HR','PHP','JAVA'];let[employee,setEmployee]=useState(initialEmployee());function initialEmployee(){if(location.pathname.includes(\"addemployee\"))// we will check active route\nreturn new Employee();// new employee\nelse{return emp;// searched employee\n}}const navigate=useNavigate();function changeState(ev){setEmployee({...employee,[ev.target.id]:ev.target.value});}useEffect(()=>{// console.log(location);\n});function collectData(ev){ev.preventDefault();if(location.pathname.includes(\"addemployee\")){// active route\naddEmp();}else{updateEmp();}}async function addEmp(){const emp=await addEmployee(employee);if(emp!==null&&emp!==\"\"){window.alert(`Employee with id ${emp._id} added successfully...`);navigate('/employees');}else{window.alert(\"Something went wrong while adding new employee....\");navigate('/employees');}}async function updateEmp(){const data=await updateEmployee(employee);// console.log(data);\n// if(data.modifiedCount>0){  /* emp!==null && emp!==\"\" */\nwindow.alert(`Employee with id ${employee._id} updated successfully...`);navigate('/employees');// }\n// else\n// window.alert(\"Something went wrong while updating employee....\")\n}return/*#__PURE__*/_jsx(_Fragment,{children:/*#__PURE__*/_jsx(\"div\",{class:\"container\",children:/*#__PURE__*/_jsx(\"div\",{class:\"row justify-content-center\",children:/*#__PURE__*/_jsx(\"div\",{class:\"col-md-8 pt-5 pb-5\",children:/*#__PURE__*/_jsxs(\"div\",{class:\"card\",children:[/*#__PURE__*/_jsx(\"div\",{class:\"card-header\",children:\"Add Employee\"}),/*#__PURE__*/_jsx(\"div\",{class:\"card-body\",children:/*#__PURE__*/_jsxs(\"form\",{className:\"w-100 p-3\",onSubmit:collectData,children:[/*#__PURE__*/_jsxs(\"div\",{className:\"mb-3\",children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"_id\",className:\"form-label\",children:\"ID\"}),/*#__PURE__*/_jsx(\"input\",{type:\"number\",className:\"form-control\",id:\"_id\",value:employee._id,onChange:changeState,required:true,readOnly:location.pathname.includes(\"editemployee\")})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"mb-3\",children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"emp_name\",className:\"form-label\",children:\"Name\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",className:\"form-control\",id:\"emp_name\",value:employee.emp_name,onChange:changeState,required:true})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"mb-3\",children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"emp_email\",className:\"form-label\",children:\"Email ID\"}),/*#__PURE__*/_jsx(\"input\",{type:\"email\",className:\"form-control\",id:\"emp_email\",value:employee.emp_email,onChange:changeState,required:true})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"mb-3\",children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"emp_salary\",className:\"form-label\",children:\"Salary\"}),/*#__PURE__*/_jsx(\"input\",{type:\"number\",className:\"form-control\",id:\"emp_salary\",value:employee.emp_salary,onChange:changeState,required:true})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"mb-3\",children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"experience\",className:\"form-label\",children:\"Experience\"}),/*#__PURE__*/_jsx(\"input\",{type:\"number\",className:\"form-control\",id:\"experience\",value:employee.experience,onChange:changeState,required:true})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"mb-3\",children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"dept_code\",className:\"form-label\",children:\"Department Code\"}),/*#__PURE__*/_jsx(\"select\",{className:\"form-control\",id:\"dept_code\",value:employee.dept_code,onChange:changeState,required:true,children:departments.map((dept,i)=>/*#__PURE__*/_jsx(\"option\",{children:dept},'d'+i))})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"mb-3\",children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"joining_date\",className:\"form-label\",children:\"Joining Date\"}),/*#__PURE__*/_jsx(\"input\",{type:\"datetime-local\",className:\"form-control\",id:\"joining_date\",value:employee.joining_date,onChange:changeState,required:true})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"mb-3\",children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"secrete_code\",className:\"form-label\",children:\"Secrete Code\"}),/*#__PURE__*/_jsx(\"input\",{type:\"password\",className:\"form-control\",id:\"secrete_code\",value:employee.secrete_code,onChange:changeState,required:true})]}),/*#__PURE__*/_jsx(\"button\",{type:\"submit\",className:\"btn btn-primary m-2\",children:\"Submit\"}),/*#__PURE__*/_jsx(\"button\",{type:\"reset\",className:\"btn btn-primary\",children:\"Reset\"})]})})]})})})})});}","map":{"version":3,"names":["useEffect","useState","Employee","useLoaderData","useLocation","useNavigate","useParams","addEmployee","updateEmployee","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","EmployeeForm","location","emp","departments","employee","setEmployee","initialEmployee","pathname","includes","navigate","changeState","ev","target","id","value","collectData","preventDefault","addEmp","updateEmp","window","alert","_id","data","children","class","className","onSubmit","htmlFor","type","onChange","required","readOnly","emp_name","emp_email","emp_salary","experience","dept_code","map","dept","i","joining_date","secrete_code"],"sources":["/home/neosoft/Desktop/react-ems3/src/components/EmployeeForm.js"],"sourcesContent":["import { useEffect, useState } from \"react\";\nimport { Employee } from \"../classes/Employee\";\nimport { useLoaderData, useLocation, useNavigate, useParams } from \"react-router-dom\";\nimport {addEmployee, updateEmployee} from '../model/EmployeeCRUD';\n\nexport function EmployeeForm(){\n    const location=useLocation();\n    const emp=useLoaderData();\n    const departments=['LD', 'JS','HR','PHP','JAVA'];\n    let [employee, setEmployee]=useState(initialEmployee());\n    function initialEmployee(){\n        if(location.pathname.includes(\"addemployee\")) // we will check active route\n            return new Employee(); // new employee\n        else{\n            return emp; // searched employee\n        }\n    }\n    const navigate=useNavigate();\n    function changeState(ev){\n      setEmployee({...employee, [ev.target.id]:ev.target.value});\n    }\n    useEffect(()=>{\n      // console.log(location);\n    })\n    function collectData(ev){\n        ev.preventDefault();\n        if(location.pathname.includes(\"addemployee\")){ // active route\n           addEmp();\n        }\n        else{\n            updateEmp();\n        }\n    }\n    async function addEmp(){\n        const emp=await addEmployee(employee);\n        if(emp!==null && emp!==\"\"){\n            window.alert(`Employee with id ${emp._id} added successfully...`)\n            navigate('/employees');\n        }\n        else{\n            window.alert(\"Something went wrong while adding new employee....\")\n            navigate('/employees');\n        }\n\n    }\n    async function updateEmp(){\n        const data=await updateEmployee(employee);\n       // console.log(data);\n        // if(data.modifiedCount>0){  /* emp!==null && emp!==\"\" */\n            window.alert(`Employee with id ${employee._id} updated successfully...`)\n            navigate('/employees');\n        // }\n        // else\n            // window.alert(\"Something went wrong while updating employee....\")\n    }\n    return (\n     <>\n     <div class=\"container\">\n        <div class=\"row justify-content-center\">\n            <div class=\"col-md-8 pt-5 pb-5\">\n                <div class=\"card\">\n                    <div class=\"card-header\">Add Employee</div>\n\n                    <div class=\"card-body\">\n\n                        <form className=\"w-100 p-3\" onSubmit={collectData}>\n                            <div className=\"mb-3\">\n                                <label htmlFor=\"_id\" className=\"form-label\">ID</label>\n                                <input type=\"number\" className=\"form-control\" id=\"_id\"  value={employee._id} onChange={changeState} required readOnly={location.pathname.includes(\"editemployee\")} />\n                            </div>\n                            <div className=\"mb-3\">\n                                <label htmlFor=\"emp_name\" className=\"form-label\">Name</label>\n                                <input type=\"text\" className=\"form-control\" id=\"emp_name\" value={employee.emp_name} onChange={changeState} required />\n                            </div>\n                            <div className=\"mb-3\">\n                                <label htmlFor=\"emp_email\" className=\"form-label\">Email ID</label>\n                                <input type=\"email\" className=\"form-control\" id=\"emp_email\" value={employee.emp_email} onChange={changeState} required/>\n                            </div>\n                            <div className=\"mb-3\">\n                                <label htmlFor=\"emp_salary\" className=\"form-label\">Salary</label>\n                                <input type=\"number\" className=\"form-control\" id=\"emp_salary\" value={employee.emp_salary} onChange={changeState} required />\n                            </div>\n                            <div className=\"mb-3\">\n                                <label htmlFor=\"experience\" className=\"form-label\">Experience</label>\n                                <input type=\"number\" className=\"form-control\" id=\"experience\" value={employee.experience} onChange={changeState} required/>\n                            </div>\n                            <div className=\"mb-3\">\n                                <label htmlFor=\"dept_code\" className=\"form-label\">Department Code</label>\n                                <select  className=\"form-control\" id=\"dept_code\" value={employee.dept_code} onChange={changeState} required>\n                                    {departments.map((dept, i)=><option key={'d'+i}>{dept}</option>)}\n                                </select>\n                            </div>\n                            <div className=\"mb-3\">\n                                <label htmlFor=\"joining_date\" className=\"form-label\">Joining Date</label>\n                                <input type=\"datetime-local\" className=\"form-control\" id=\"joining_date\" value={employee.joining_date} onChange={changeState} required />\n                            </div>\n                            <div className=\"mb-3\">\n                                <label htmlFor=\"secrete_code\" className=\"form-label\">Secrete Code</label>\n                                <input type=\"password\" className=\"form-control\" id=\"secrete_code\" value={employee.secrete_code} onChange={changeState} required/>\n                            </div>\n                            <button type=\"submit\" className=\"btn btn-primary m-2\">Submit</button>\n                            <button type=\"reset\" className=\"btn btn-primary\">Reset</button>\n                        </form> \n                    </div>\n                </div>\n            </div>\n        </div>\n    </div>\n     </>\n    )\n}"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}